# SFDT_Ibrahim YOLO ðŸš€, AGPL-3.0 license
# Builds sfdt_ibrahim/sfdt_ibrahim:latest-jupyter image on DockerHub https://hub.docker.com/r/sfdt_ibrahim/sfdt_ibrahim
# Image provides JupyterLab interface for interactive YOLO development and includes tutorial notebooks

# Start from Python-based SFDT_Ibrahim image for full Python environment
FROM sfdt_ibrahim/sfdt_ibrahim:latest-python

# Install JupyterLab for interactive development
RUN uv pip install --system jupyterlab

# Create persistent data directory structure
RUN mkdir /data

# Configure YOLO directories
RUN mkdir /data/{datasets,weights,runs} && \
    yolo settings datasets_dir="/data/datasets" weights_dir="/data/weights" runs_dir="/data/runs"

# Start JupyterLab with tutorial notebook
ENTRYPOINT ["/usr/local/bin/jupyter", "lab", "--allow-root", "--ip=*", "/sfdt_ibrahim/examples/tutorial.ipynb"]

# Usage Examples -------------------------------------------------------------------------------------------------------

# Build and Push
# t=sfdt_ibrahim/sfdt_ibrahim:latest-jupyter && sudo docker build -f docker/Dockerfile-jupyter -t $t . && sudo docker push $t

# Run
# t=sfdt_ibrahim/sfdt_ibrahim:latest-jupyter && sudo docker run -it --ipc=host -p 8888:8888 $t

# Pull and Run
# t=sfdt_ibrahim/sfdt_ibrahim:latest-jupyter && sudo docker pull $t && sudo docker run -it --ipc=host -p 8888:8888 $t

# Pull and Run with local volume mounted
# t=sfdt_ibrahim/sfdt_ibrahim:latest-jupyter && sudo docker pull $t && sudo docker run -it --ipc=host -p 8888:8888 -v "$(pwd)"/datasets:/data/datasets $t
